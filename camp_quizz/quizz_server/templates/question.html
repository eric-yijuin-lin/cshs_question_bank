<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <title>題目倒數頁面</title>
    <style>
        @font-face {
            font-family: 'BopomoKai';
            src: url("/static/fonts/BpmfZihiKaiStd-Regular.ttf") format("truetype");
        }

        body {
            margin: 0;
            padding: 20px;
            font-family: sans-serif;
        }

        .container {
            display: flex;
            gap: 20px;
            height: 100vh;
            /* 讓整個 container 撐滿 viewport */
        }

        /* 第一欄固定 100% viewport 高度，三格平均分配高度 */
        .column-1 {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .column-1 .cell {
            flex: 1;
            display: flex;
            align-items: center;
            /* 垂直置中文字 */
            justify-content: center;
            /* 水平置中文字 */
            font-size: clamp(1.5rem, 2.5vw, 3rem);
            text-align: center;
        }

        /* 第二欄與第三欄正常顯示即可 */
        .column {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 20px;
            text-align: center;
            font-size: clamp(1.5rem, 2.5vw, 3rem);
        }

        .question-text {
            font-family: 'BopomoKai', sans-serif;
            font-size: clamp(2rem, 3vw, 4rem);
        }

        .countdown {
            font-size: clamp(2.5rem, 4vw, 5rem);
            font-weight: bold;
        }

        .orange {
            color: orange;
        }

        .red {
            color: red;
        }

        .hidden {
            visibility: hidden;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Column 1 -->
        <div class="column column-1">
            <div class="cell" id="planet">{{ question.planet }}</div>
            <div class="cell hidden" id="stage">{{ question.stage }}</div>
            <div class="cell hidden" id="source">{{ question.source }}</div>
        </div>

        <!-- Column 2 -->
        <div class="column">
            <div class="question-text">{{ question.question }}</div>
        </div>

        <!-- Column 3 -->
        <div class="column">
            <div id="timer" class="countdown">60</div>
        </div>
    </div>

    <script>
        let timeLeft = 60;
        const timerEl = document.getElementById("timer");
        const stageEl = document.getElementById("stage");
        const sourceEl = document.getElementById("source");

        const countdown = setInterval(() => {
            timeLeft--;
            timerEl.textContent = timeLeft;

            // 顯示條件邏輯
            if (timeLeft === 40) {
                stageEl.classList.remove("hidden");
            }
            if (timeLeft === 20) {
                sourceEl.classList.remove("hidden");
            }

            // 變色邏輯
            if (timeLeft <= 10) {
                timerEl.classList.add("red");
                timerEl.classList.remove("orange");
            } else if (timeLeft <= 30) {
                timerEl.classList.add("orange");
                timerEl.classList.remove("red");
            } else {
                timerEl.classList.remove("orange", "red");
            }

            // 結束倒數
            if (timeLeft <= 0) {
                clearInterval(countdown);
                timerEl.textContent = "時間到";
            }
        }, 1000);
    </script>
</body>

</html>